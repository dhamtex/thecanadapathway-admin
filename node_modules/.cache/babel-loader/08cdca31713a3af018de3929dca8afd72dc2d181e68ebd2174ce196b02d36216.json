{"ast":null,"code":"var _jsxFileName = \"/Users/israel/Documents/Others/project-admin/src/hoc/withDashboardContext.tsx\";\nimport { useEffect, useState } from \"react\";\nimport Loading from \"../Loading\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAppContext } from \"../context/appcontext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst withDashboardContext = Component => {\n  var _s = $RefreshSig$();\n  return _s(() => {\n    _s();\n    const navigate = useNavigate();\n    const [isLoading, setLoading] = useState(true);\n    const {\n      setActiveStudents,\n      setSuspendedStudents\n    } = useAppContext();\n    const fetchActiveStudents = async accessToken => {\n      const response = await axios.get(\"http://localhost:8085/admin/active-students\", {\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        }\n      }).catch(error => {\n        var _error$response, _error$response$data;\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.statusCode) === 401) navigate(\"/\");\n      });\n      setActiveStudents(response === null || response === void 0 ? void 0 : response.data);\n    };\n    const fetchSuspendedStudents = async accessToken => {\n      const response = await axios.get(\"http://localhost:8085/admin/suspended-students\", {\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        }\n      }).catch(error => {\n        var _error$response2, _error$response2$data;\n        if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.statusCode) === 401) navigate(\"/\");\n      });\n      setSuspendedStudents(response === null || response === void 0 ? void 0 : response.data);\n    };\n    useEffect(() => {\n      const accessToken = localStorage.getItem(\"accessToken\");\n      const user = localStorage.getItem(\"user\");\n      const date = localStorage.getItem(\"date\");\n      const expiredToken = date && new Date().getTime() - +date > 3.6e6;\n      if (!accessToken || !user && expiredToken === false) navigate(\"/\");\n      fetchActiveStudents(accessToken);\n      fetchSuspendedStudents(accessToken);\n      setLoading(false);\n    }, []);\n    return isLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 24\n    }, this) : /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 38\n    }, this);\n  }, \"/SVOUCPJ3OJjJRTGEgL0DDLAuS8=\", false, function () {\n    return [useNavigate, useAppContext];\n  });\n};\nexport default withDashboardContext;","map":{"version":3,"names":["useEffect","useState","Loading","axios","useNavigate","useAppContext","jsxDEV","_jsxDEV","withDashboardContext","Component","_s","$RefreshSig$","navigate","isLoading","setLoading","setActiveStudents","setSuspendedStudents","fetchActiveStudents","accessToken","response","get","headers","Authorization","catch","error","_error$response","_error$response$data","data","statusCode","fetchSuspendedStudents","_error$response2","_error$response2$data","localStorage","getItem","user","date","expiredToken","Date","getTime","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/israel/Documents/Others/project-admin/src/hoc/withDashboardContext.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Loading from \"../Loading\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAppContext } from \"../context/appcontext\";\n\nconst withDashboardContext = (Component: () => JSX.Element) => {\n  return () => {\n    const navigate = useNavigate();\n    const [isLoading, setLoading] = useState(true);\n    const { setActiveStudents, setSuspendedStudents } = useAppContext();\n\n    const fetchActiveStudents = async (accessToken: string) => {\n      const response = await axios\n        .get(\"http://localhost:8085/admin/active-students\", {\n          headers: {\n            Authorization: `Bearer ${accessToken}`,\n          },\n        })\n        .catch((error) => {\n          if (error.response?.data?.statusCode === 401) navigate(\"/\");\n        });\n      setActiveStudents(response?.data);\n    };\n\n    const fetchSuspendedStudents = async (accessToken: string) => {\n      const response = await axios\n        .get(\"http://localhost:8085/admin/suspended-students\", {\n          headers: {\n            Authorization: `Bearer ${accessToken}`,\n          },\n        })\n        .catch((error) => {\n          if (error.response?.data?.statusCode === 401) navigate(\"/\");\n        });\n      setSuspendedStudents(response?.data);\n    };\n\n    useEffect(() => {\n      const accessToken = localStorage.getItem(\"accessToken\");\n      const user = localStorage.getItem(\"user\");\n      const date = localStorage.getItem(\"date\");\n      const expiredToken = date && new Date().getTime() - +date > 3.6e6;\n      if (!accessToken || (!user && expiredToken === false)) navigate(\"/\");\n      fetchActiveStudents(accessToken!);\n      fetchSuspendedStudents(accessToken!);\n      setLoading(false);\n    }, []);\n\n    return isLoading ? <Loading /> : <Component />;\n  };\n};\n\nexport default withDashboardContext;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}